diff -urN strace-4.3.org/desc.c strace-4.3/desc.c
--- strace-4.3.org/desc.c	Wed Apr  4 21:38:47 2001
+++ strace-4.3/desc.c	Wed Apr  4 21:38:54 2001
@@ -139,6 +139,11 @@
 #ifdef F_UNSHARE
 	{ F_UNSHARE,	"F_UNSHARE"	},
 #endif
+#if defined(F_GETLK64) && F_GETLK64 != F_GETLK
+	{ F_GETLK64,	"F_GETLK64"	},
+	{ F_SETLK64,	"F_SETLK64"	},
+	{ F_SETLKW64,	"F_SETLKW64"	},
+#endif
 	{ 0,		NULL		},
 };
 
@@ -334,6 +364,12 @@
 #endif
  		default:
 			tprintf(", %#lx", tcp->u_arg[2]);
+			break;
+#if defined(F_GETLK64) && F_GETLK64 != F_GETLK
+		case F_SETLK64: case F_SETLKW64:
+			tprintf(", ");
+			printflock64(tcp, tcp->u_arg[2], 0);
+#endif
 			break;
 		}
 	}
diff -urN strace-4.3.org/file.c strace-4.3/file.c
--- strace-4.3.org/file.c	Wed Apr  4 21:38:47 2001
+++ strace-4.3/file.c	Wed Apr  4 21:38:54 2001
@@ -40,8 +40,10 @@
 #include <linux/types.h>
 #include <linux/dirent.h>
 #undef dirent
+#undef dirent64
 #else
 #define kernel_dirent dirent
+#define kernel_dirent64 dirent64
 #endif
 
 #ifdef linux
diff -urN strace-4.3.org/linux/alpha/syscallent.h strace-4.3/linux/alpha/syscallent.h
--- strace-4.3.org/linux/alpha/syscallent.h	Wed Apr  4 21:38:47 2001
+++ strace-4.3/linux/alpha/syscallent.h	Wed Apr  4 21:39:18 2001
@@ -406,3 +406,4 @@
 	{ 2,	TF,	sys_pivot_root,		"pivot_root"		}, /* 374 */
 	{ 3,	0,	sys_mincore,		"mincore"		}, /* 375 */
 	{ 3,	0,	printargs,		"pciconfig_iobase"	}, /* 376 */
+	{ 3,    0,      sys_getdents64,         "getdents64"            }, /* 377 */  
diff -urN strace-4.3.org/linux/ia64/syscallent.h strace-4.3/linux/ia64/syscallent.h
--- strace-4.3.org/linux/ia64/syscallent.h	Wed Apr  4 21:38:47 2001
+++ strace-4.3/linux/ia64/syscallent.h	Wed Apr  4 21:38:54 2001
@@ -1243,7 +1243,7 @@
 	{ 8,	0,	printargs,		"SYS_1211"	}, /* 1211 */
 	{ 8,	0,	printargs,		"SYS_1212"	}, /* 1212 */
 	{ 8,	0,	printargs,		"SYS_1213"	}, /* 1213 */
-	{ 8,	0,	printargs,		"SYS_1214"	}, /* 1214 */
+	{ 3,	0,	sys_getdents64,		"getdents64"	}, /* 1214 */
 	{ 8,	0,	printargs,		"SYS_1215"	}, /* 1215 */
 	{ 8,	0,	printargs,		"SYS_1216"	}, /* 1216 */
 	{ 8,	0,	printargs,		"SYS_1217"	}, /* 1217 */
diff -urN strace-4.3.org/linux/sparc/syscall.h strace-4.3/linux/sparc/syscall.h
--- strace-4.3.org/linux/sparc/syscall.h	Wed Apr  4 21:38:47 2001
+++ strace-4.3/linux/sparc/syscall.h	Wed Apr  4 21:38:54 2001
@@ -87,7 +87,7 @@
 /* 2.2 file system */
 int	sys_chdir(),sys_chroot();
 int	sys_fchdir(),sys_fchroot();
-int	sys_mkdir(),sys_rmdir(),sys_getdirentries(), sys_getdents(),sys_readdir();
+int	sys_mkdir(),sys_rmdir(),sys_getdirentries(), sys_getdents(),sys_getdents64(),sys_readdir();
 int	sys_creat(),sys_open(),sys_mknod(),sys_unlink(),sys_stat(),sys_fstat(),sys_lstat();
 int	sys_chown(),sys_fchown(),sys_chmod(),sys_fchmod(),sys_utimes();
 int	sys_link(),sys_symlink(),sys_readlink(),sys_rename();
diff -urN strace-4.3.org/linux/sparc/syscallent.h strace-4.3/linux/sparc/syscallent.h
--- strace-4.3.org/linux/sparc/syscallent.h	Wed Apr  4 21:38:47 2001
+++ strace-4.3/linux/sparc/syscallent.h	Wed Apr  4 21:38:54 2001
@@ -153,8 +153,8 @@
 	{ 4,	TN,	sys_getmsg,	"getmsg" },		/* 151 */
 	{ 4,	TN,	sys_putmsg,	"putmsg" },		/* 152 */
 	{ 3,	0,	sys_poll,	"poll" },		/* 153 */
-	{ 0,	0,	printargs,	"SYS_154" },		/* 154 */
-	{ 1,	0,	printargs,	"nfssvc" },		/* 155 */
+	{ 3,	0,	sys_getdents64,	"getdents64" },		/* 154 */
+	{ 3,	0,	sys_fcntl,	"fcntl64" },		/* 155 */
 	{ 4,	0,	printargs,	"getdirentries" },	/* 156 */
 	{ 2,	TF,	sys_statfs,	"statfs" },		/* 157 */
 	{ 2,	0,	sys_fstatfs,	"fstatfs" },		/* 158 */
diff -urN strace-4.3.org/linux/syscall.h strace-4.3/linux/syscall.h
--- strace-4.3.org/linux/syscall.h	Wed Apr  4 21:38:47 2001
+++ strace-4.3/linux/syscall.h	Wed Apr  4 21:38:54 2001
@@ -69,7 +69,7 @@
 int sys_getpgid(), sys_fchdir(), sys_bdflush();
 int sys_sysfs(), sys_personality(), sys_afs_syscall();
 int sys_setfsuid(), sys_setfsgid(), sys_llseek();
-int sys_getdents(), sys_flock(), sys_msync();
+int sys_getdents(), sys_getdents64(), sys_flock(), sys_msync();
 int sys_readv(), sys_writev(), sys_select();
 int sys_getsid(), sys_fdatasync(), sys_sysctl();
 int sys_mlock(), sys_munlock(), sys_mlockall(), sys_munlockall(), sys_madvise();
diff -urN strace-4.3.org/linux/syscallent.h strace-4.3/linux/syscallent.h
--- strace-4.3.org/linux/syscallent.h	Wed Apr  4 21:38:47 2001
+++ strace-4.3/linux/syscallent.h	Wed Apr  4 21:45:03 2001
@@ -265,9 +265,8 @@
 	{ 2,	TF,	sys_pivotroot,		"pivot_root"	}, /* 217 */
 	{ 3,	0,	sys_mincore,		"mincore"	}, /* 218 */
 	{ 3,	0,	sys_madvise,		"madvise"	}, /* 219 */
-
-        { 5,    0,      printargs,              "SYS_220"       }, /* 220 */
-        { 5,    0,      printargs,              "SYS_221"       }, /* 221 */
+	{ 3,    0,      sys_getdents64,         "getdents64"    }, /* 220 */
+	{ 3,    0,      sys_fcntl,              "fcntl64"       }, /* 221 */          
         { 5,    0,      printargs,              "SYS_222"       }, /* 222 */
         { 5,    0,      printargs,              "SYS_223"       }, /* 223 */
         { 5,    0,      printargs,              "SYS_224"       }, /* 224 */

